runApp()
runApp()
runApp()
runApp()
com_names
Coef <- as.character("C-H")
com_names <- relevel(as.factor(com_names), ref = as.factor(Coef));com_names
com_names <- relevel(as.factor(com_names), ref = Coef);com_names
runApp()
paste0('"', Coef, '"')
paste0('\"', Coef, '\"')
paste0('\."', Coef, '\."')
paste0('//."', Coef, '//."')
paste0('//"', Coef, '//"')
paste0('\\"', Coef, '\\"')
Coef
com_names
as.factor(as.character(com_names))
as.factor(as.character(com_names[1]))
com_names
data_uni <- iris[,c(5,1:4)]
data_uni <- cbind(ID=seq(1:150, data_uni))
colnames(data_uni)[2] <- "Group"
data_uni <- iris[,c(5,1:4)]
data_uni <- cbind(ID=seq(1:150), data_uni)
colnames(data_uni)[2] <- "Group"
contrasts <- levels(as.factor(data_uni$Group))
combinations <- expand.grid(contrasts, contrasts)
combinations <- combinations[!(combinations$Var1 == combinations$Var2),]
combinations <- combinations[order(combinations$Var1),]
combinations <- combinations[c(1:(nrow(combinations)/2)),]
com_names <- c()
for (i in 1:nrow(combinations)){
com_names[i] <- paste0(combinations$Var1[i],"-",combinations$Var2[i])
}
fac1 <- as.factor(data_uni$Group)
com_names <- as.vector(com_names)
com_names
Coef <- as.character("setosa-virginica")
com_names <- relevel(as.factor(com_names), ref = Coef);com_names
com_names <- data.frame(relevel(as.factor(com_names), ref = Coef));com_names
com_names <- data.frame(relevel(as.factor(com_names$relevel.as.factor.com_names...ref...Coef.), ref = Coef));com_names
com_names <- data.frame(relevel(com_names$relevel.as.factor.com_names...ref...Coef., ref = Coef));com_names
which(com_names == Coef)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
com_names
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
runApp()
data_uni <- readr::read_csv("/Users/pol/Dropbox/Shiny_apps/POMA/ST000284/MET_CRC_ST000284.csv")
colnames(data_uni)[2] <- "Group"
contrasts <- levels(as.factor(data_uni$Group))
combinations <- expand.grid(contrasts, contrasts)
combinations <- combinations[!(combinations$Var1 == combinations$Var2),]
combinations <- combinations[order(combinations$Var1),]
combinations <- combinations[c(1:(nrow(combinations)/2)),]
com_names <- c()
for (i in 1:nrow(combinations)){
com_names[i] <- paste0(combinations$Var1[i],"-",combinations$Var2[i])
}
com_names
com_names[1]
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
contrasts <- levels(as.factor(data_uni$Group))
combinations <- expand.grid(contrasts, contrasts)
data_uni <- readr::read_csv("/Users/pol/Dropbox/Shiny_apps/POMA/ST000284/MET_CRC_ST000284.csv")
colnames(data_uni)[2] <- "Group"
contrasts <- levels(as.factor(data_uni$Group))
combinations <- expand.grid(contrasts, contrasts)
combinations <- combinations[!(combinations$Var1 == combinations$Var2),]
combinations <- combinations[order(combinations$Var1),]
combinations <- combinations[c(1:(nrow(combinations)/2)),]
com_names <- c()
for (i in 1:nrow(combinations)){
com_names[i] <- paste0(combinations$Var1[i],"-",combinations$Var2[i])
}
com_names <- data.frame(comparisons = com_names)
View(com_names)
runApp()
runApp()
com_names <- NULL
com_names <- c()
runApp()
com_names <- c(NULL)
runApp()
write.csv(iris,"/Users/pol/Desktop/iris.csv")
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
?makeContrasts
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
data_uni <- readr::read_csv("/Users/pol/Dropbox/Shiny_apps/POMA/ST000284/MET_CRC_ST000284.csv")
colnames(data_uni)[2] <- "Group"
contrasts <- levels(as.factor(data_uni$Group))
combinations <- expand.grid(contrasts, contrasts)
combinations <- combinations[!(combinations$Var1 == combinations$Var2),]
combinations <- combinations[order(combinations$Var1),]
combinations <- combinations[c(1:(nrow(combinations)/2)),]
com_names <- c()
for (i in 1:nrow(combinations)){
com_names[i] <- paste0(combinations$Var1[i],"-",combinations$Var2[i])
}
environment(com_names)
com_names
com_names
ls(com_names)
com_names
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
data_uni <- readr::read_csv("/home/pol/Escritorio/POMA/ST000284/MET_CRC_ST000284.csv")
data_uni <- iris[,c(5,1:4)]
data_uni <- cbind(ID=seq(1:150), data_uni)
colnames(data_uni)[2] <- "Group"
contrasts <- levels(as.factor(data_uni$Group))
combinations <- expand.grid(contrasts, contrasts)
combinations <- combinations[!(combinations$Var1 == combinations$Var2),]
combinations <- combinations[order(combinations$Var1),]
combinations <- combinations[c(1:(nrow(combinations)/2)),]
com_names <- c()
for (i in 1:nrow(combinations)){
com_names[i] <- paste0(combinations$Var1[i],"-",combinations$Var2[i])
}
fac1 <- as.factor(data_uni$Group)
com_names <- com_names[1]
initialmodel <- model.matrix( ~ 0 + fac1)
colnames(initialmodel) <- contrasts
cont.matrix <- makeContrasts(as.character(com_names),
levels = initialmodel)
cont.matrix
trans_limma <- t(data_uni[,c(3:ncol(data_uni))])
model <- lmFit(trans_limma, initialmodel)
model <- contrasts.fit(model, cont.matrix)
modelstats <- eBayes(model)
res <- topTable(modelstats, number = ncol(data_uni) ,
coef = as.character(com_names),
sort.by = "p")
shiny::runGitHub("shinyLimma", "SJCaldwell")
install.packages("shinyTable")
library(devtools)
install_github("trestletech/shinyTable")
shiny::runGitHub("shinyLimma", "SJCaldwell")
shiny::runGitHub("shinyLimma", "SJCaldwell")
install.packages("shinyjs")
shiny::runGitHub("shinyLimma", "SJCaldwell")
install.packages("shinyjs")
shiny::runGitHub("shinyLimma", "SJCaldwell")
install.packages("vsn")
shiny::runGitHub("shinyLimma", "SJCaldwell")
install.packages("RUnit")
shiny::runGitHub("shinyLimma", "SJCaldwell")
install.packages("convert")
shiny::runGitHub("shinyLimma", "SJCaldwell")
shiny::runGitHub("shinyLimma", "SJCaldwell")
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
covariate_limma <- readr::read_csv("/home/pol/Escritorio/POMA/ST000284/COV_CRC_ST000284.csv")
data_uni <- iris[,c(5,1:4)]
data_uni <- data_uni[1:132,]
data_uni <- cbind(ID=seq(1:132), data_uni)
colnames(data_uni)[2] <- "Group"
covariate_limma <- readr::read_csv("/home/pol/Escritorio/POMA/ST000284/COV_CRC_ST000284.csv")
form <- as.formula(noquote(paste("~ 0 + fac1 + ", paste(colnames(covariate_limma)[2:length(covariate_limma)],
collapse = " + ", sep=""), sep = "")))
form
initialmodel2 <- model.matrix(form , covariate_limma)
trans_limma2 <- t(data_limma[,c(3:ncol(data_limma))])
fac1 <- as.factor(data_limma$Group)
form <- as.formula(noquote(paste("~ 0 + fac1 + ", paste(colnames(covariate_limma)[2:length(covariate_limma)],
collapse = " + ", sep=""), sep = "")))
data_limma <- iris[,c(5,1:4)]
data_limma <- data_limma[1:132,]
data_limma <- cbind(ID=seq(1:132), data_limma)
colnames(data_limma)[2] <- "Group"
covariate_limma <- readr::read_csv("/home/pol/Escritorio/POMA/ST000284/COV_CRC_ST000284.csv")
fac1 <- as.factor(data_limma$Group)
form <- as.formula(noquote(paste("~ 0 + fac1 + ", paste(colnames(covariate_limma)[2:length(covariate_limma)],
collapse = " + ", sep=""), sep = "")))
form
initialmodel2 <- model.matrix(form , covariate_limma)
initialmodel2
contrasts <- levels(as.factor(data_limma$Group))
combinations <- expand.grid(contrasts, contrasts)
combinations <- combinations[!(combinations$Var1 == combinations$Var2),]
combinations <- combinations[order(combinations$Var1),]
combinations <- combinations[c(1:(nrow(combinations)/2)),]
combinationNames <- c()
for (i in 1:nrow(combinations)){
combinationNames[i] <- paste0(combinations$Var1[i],"-",combinations$Var2[i])
}
combinationNames
contrasts <- levels(as.factor(data_limma$Group));contrasts
combinations <- expand.grid(contrasts, contrasts) ;combinations
combinations <- combinations[!(combinations$Var1 == combinations$Var2),];combinations
combinations <- combinations[order(combinations$Var1),];combinations
contrasts <- levels(as.factor(data_limma$Group));contrasts
combinations <- expand.grid(contrasts, contrasts) ;combinations
combinations <- combinations[!(combinations$Var1 == combinations$Var2),];combinations
#combinations <- combinations[order(combinations$Var1),];combinations #
apply(combinations,2,rev)
contrasts <- levels(as.factor(data_limma$Group));contrasts
combinations <- expand.grid(contrasts, contrasts) ;combinations
combinations <- combinations[!(combinations$Var1 == combinations$Var2),];combinations
contrasts <- levels(as.factor(data_limma$Group));contrasts
combinations <- expand.grid(contrasts, contrasts) ;combinations
combinations <- combinations[!(combinations$Var1 == combinations$Var2),];combinations
dplyr::anti_join(combinations)
dplyr::anti_join(combinations, combinations[!duplicated(combinations),])
data %>% distinct(combinations$Var1, combinations$Var2)
contrasts <- levels(as.factor(data_limma$Group));contrasts
combinations <- expand.grid(contrasts, contrasts) ;combinations
combinations <- combinations[!(combinations$Var1 == combinations$Var2),];combinations
combinations %>% distinct(combinations$Var1, combinations$Var2)
contrasts <- levels(as.factor(data_limma$Group));contrasts
combinations <- expand.grid(contrasts, contrasts) ;combinations
combinations <- combinations[!(combinations$Var1 == combinations$Var2),];combinations
combinations[!duplicated(t(apply(combinations[c("Var1", "Var2")], 1, sort))), ]
runApp()
length(levels(fac1)
length(levels(fac1))
length(levels(fac1))
contrasts
combinations <- combinations[!duplicated(t(apply(combinations[c("Var1", "Var2")], 1, sort))), ]
combinations
runApp()
runApp()
runApp('~/Escritorio/Shiny_Dashboard_Template')
runApp('~/Escritorio/Shiny_Dashboard_Template')
runApp('~/Escritorio/Shiny_Dashboard_Template')
runApp('~/Escritorio/Shiny_Dashboard_Template')
runApp('~/Escritorio/Shiny_Dashboard_Template')
runApp()
runApp()
runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
rsconnect::appDependencies()
runApp()
?library
runApp()
runApp()
BiocInstaller::biocinstallRepos()
BiocInstaller::biocinstallRepos()
runApp()
library('devtools')
install_github("mixOmicsTeam/mixOmics")
shiny::runApp()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
?dropdownMenu
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
?dropdownMenuOutput
runApp()
runApp()
?dropdownActionMenu
runApp()
runApp()
runApp()
?renderMenu
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp('~/Desktop/Untitled.R')
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
runApp()
vroom::vroom()
?vroom
library(shiny)
?vroom
?textInput
runApp()
write.table(iris[,c(5,rep(1,150),1:4)], "test.txt", sep = "\n")
runApp()
write.table(iris[,c(5,1:4)], "test.txt", sep = "\n")
runApp()
runApp()
data <- vroom::vroom("/home/pol/Escritorio/Database_InCHIANTIstudy_n1155_9years_DAIRY_2507219.csv", delim = ",")
library(shiny)
?radioButtons
runApp()
runApp()
runApp()
runApp()
getwd()
runApp()
tempdir()
runApp()
runApp()
runApp()
?tempdir
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
data <- vroom::vroom("ST000284/MET_CRC_ST000284.csv", delim = ",")
#data <- vroom::vroom("ST000284/MET_CRC_ST000284.csv", delim = ",")
contrasts <- levels(as.factor(data_limma$Group))
data_limma <- vroom::vroom("ST000284/MET_CRC_ST000284.csv", delim = ",")
#data_limma <- vroom::vroom("ST000284/MET_CRC_ST000284.csv", delim = ",")
contrasts <- levels(as.factor(data_limma$Group))
contrasts
colnames(data_limma)[2] <- "Group
""
"
colnames(data_limma)[2] <- "Group"
#data_limma <- vroom::vroom("ST000284/MET_CRC_ST000284.csv", delim = ",")
#colnames(data_limma)[2] <- "Group"
contrasts <- levels(as.factor(data_limma$Group))
contrasts
combinations <- expand.grid(contrasts, contrasts)
combinations <- combinations[!(combinations$Var1 == combinations$Var2),]
combinations <- combinations[!duplicated(t(apply(combinations[c("Var1", "Var2")], 1, sort))), ]
combinations
combinationNames <- c()
for (i in 1:nrow(combinations)){
combinationNames[i] <- paste0(combinations$Var1[i],"-",combinations$Var2[i])
}
combinationNames
combinationNames[1]
fac1 <- as.factor(data_limma$Group)
library(limma)
initialmodel <- model.matrix( ~ 0 + fac1)
colnames(initialmodel) <- contrasts
cont.matrix <- limma::makeContrasts(contrasts = input$coef_limma,
levels = initialmodel)
contrasts
initialmodel
combinationNames[1]
cont.matrix <- limma::makeContrasts(contrasts = "H-C",
levels = initialmodel)
trans_limma <- t(data_limma[,c(3:ncol(data_limma))])
model <- lmFit(trans_limma, initialmodel)
model <- contrasts.fit(model, cont.matrix)
modelstats <- eBayes(model)
res <- topTable(modelstats, number = ncol(data_limma) ,
coef = "H-C",
sort.by = "p")
metabolite_name <- rownames(res)
logFC <- round(res$logFC,3)
AveExpr <- round(res$AveExpr,3)
t <- round(res$t,3)
B <- round(res$B,3)
P.Value <- res$P.Value
adj.P.Val <- res$adj.P.Val
res <- as.data.frame(cbind(logFC, AveExpr, t, B, P.Value, adj.P.Val))
rownames(res) <- metabolite_name
View(res)
shiny::runApp()
runApp()
packageVersion("limma")
BiocManager::install("limma")
packageVersion("limma")
library
runApp()
runApp()
shiny::runGitHub("shinyLimma", "SJCaldwell")
install.packages("shinyTable")
R_min_version = "3.1.0"
R_version = paste0(R.Version()$major, ".", R.Version()$minor)
if(compareVersion(R_version, R_min_version) < 0){
stop("You do not have the latest required.\n",
"Launch will fail if you continue.\n",
"Go to http://cran.r-project.org/ to update your version of R.")
}
######
#Install basic required packages if not available/installed
######
download_not_installed <- function(x){
availpacks = .packages(all.available = TRUE)
source("http://bioconductor.org/biocLite.R")
missingPackages = x[!(x %in% availpacks)]
message("The following packages were missing. Installation attempted...")
message(missingPackages)
if (length(missingPackages) > 0){
for (i in missingPackages){
message("Installing", i, "package using biocLite...\n")
biocLite(i)
}
}
}
vanilla_install_packages <- c("limma",
'markdown',
'shiny',
'shinyjs',
'shinyBS',
'scales',
'markdown',
'ggplot2',
'png',
'vsn',
'RUnit',
'reshape',
'digest',
'Rcpp',
'VennDiagram',
'convert'
)
download_not_installed(vanilla_install_packages)
###################################
#Should use latest version of shiny
###################################
shiny_okay <- FALSE
if ("shiny" %in% .packages(all.available = TRUE)){
shiny_min_version = "0.11"
shiny_compare = compareVersion(as.character(packageVersion("shiny")), shiny_min_version)
if (shiny_compare >= 0){
shiny_okay <- TRUE
}
}
if(!shiny_okay){
install.packages('devtools')
devtools::install_github("rstudio/shiny")
}
devtools::install_github("trestletech/shinyTable")
shiny::runGitHub("shinyLimma", "SJCaldwell")
install.packages("RUnit")
shiny::runGitHub("shinyLimma", "SJCaldwell")
install.packages("convert")
shiny::runGitHub("shinyLimma", "SJCaldwell")
runApp()
initialmodel
runApp()
runApp()
runApp()
runApp()
